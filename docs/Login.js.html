<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Login.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Login.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { Component } from 'react';
import './App.css';
import { Button, FormGroup, ControlLabel, FormControl, HelpBlock,
         Grid, Row, Col } from 'react-bootstrap';

/**
*  User login UI component
*/
class Navigation extends Component {
  constructor(props) {
    super();
    this.state = {
      clientId: '1_3bcbxd9e24g0gk4swg0kwgcwg4o8k8g4g888kwc44gcc0gwwk4',  // digit(s) before underscore might have to match database
      clientSecret: '4ok2x70rlfokc8g0wws8c8kwcokw80k44sg48goc0ok4w0so0k',
      username: '',
      password: '',
      errorDescription: null,
    };
  }

  /** Calls the App compnent's login method */
  login = () => {
    this.props.login();
  }

  /** Calls the App compnent's logout method */
  logout = () => {
    this.props.logout();
  }

  /** Form change handler */
  handleUsernameChange = e => {
    this.setState({ username: e.target.value });
  }

  /** Form change handler */
  handlePasswordChange = e => {
    this.setState({ password: e.target.value });
  }

  /** Return key press handler - calls submit() */
  handleKeyPress = e => {
    if (e.keyCode === 13) this.submit();
  }

  /**
   * Sends a POST request with OAuth2 client id and client secret.
   * Calls the App component's setAccessToken, setExpirationDate and
   * setRefreshToken methods with the POST request'S return values.
   */
  submit = () => {
    fetch(this.props.apiUrl + 'oauth/v2/token', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        grant_type: 'password',
        client_id: this.state.clientId,
        client_secret: this.state.clientSecret,
        username: this.state.username,
        password: this.state.password
      })
    })
    .then(response => response.json())
    .then(json => {
      console.log('Response body: ', json); // Remove in production
      this.setState({ errorDescription: json.error_description });
      this.props.setAccessToken(json.access_token);
      this.props.setExpirationDate(json.expires_in);
      this.props.setRefreshToken(json.refresh_token);
      if (json.access_token) this.login();
    })
    .catch(error => console.log('Request failed: ', error)); // Remove in production
  }

  /**
   * Renders the component.
   * @returns {jsx} component html code
   */
  render() {
    if (this.props.loggedIn) {
      return (
        &lt;Button
          type="button"
          className="Logout"
          bsSize="xsmall"
          onClick={this.logout}>
          Logout
        &lt;/Button>
      );
    } else {
      return (
        &lt;Grid className="Login">
          &lt;Row>
            &lt;Col xs={6} xsOffset={3}>
              &lt;form>
                &lt;FormGroup controlId="formLoginUsername" validationState={this.state.errorDescription ? 'error' : null}>
                  &lt;ControlLabel>Username&lt;/ControlLabel>
                  &lt;FormControl
                    type="text"
                    value={this.state.username.value}
                    placeholder="Enter username"
                    onChange={this.handleUsernameChange}
                    onKeyDown={this.handleKeyPress}
                    autoFocus
                  />
                &lt;/FormGroup>
                &lt;FormGroup controlId="formLoginPassword" validationState={this.state.errorDescription ? 'error' : null}>
                  &lt;ControlLabel className="ControlLabel">Password&lt;/ControlLabel>
                  &lt;FormControl
                    type='password'
                    value={this.state.password.value}
                    placeholder="Enter password"
                    onChange={this.handlePasswordChange}
                    onKeyDown={this.handleKeyPress}
                  />
                  &lt;HelpBlock>{this.state.errorDescription}&lt;/HelpBlock>
                &lt;/FormGroup>
                &lt;Button type="button" onClick={this.submit}>Submit&lt;/Button>
              &lt;/form>
            &lt;/Col>
          &lt;/Row>
        &lt;/Grid>
      )
    }
  }
}

export default Navigation;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="App.html">App</a></li><li><a href="ContainerCreate.html">ContainerCreate</a></li><li><a href="ContainerEdit.html">ContainerEdit</a></li><li><a href="ContainerOverview.html">ContainerOverview</a></li><li><a href="ContainerPage.html">ContainerPage</a></li><li><a href="ContainerShow.html">ContainerShow</a></li><li><a href="HostAuthorize.html">HostAuthorize</a></li><li><a href="HostCreate.html">HostCreate</a></li><li><a href="HostEdit.html">HostEdit</a></li><li><a href="HostOverview.html">HostOverview</a></li><li><a href="HostPage.html">HostPage</a></li><li><a href="HostShow.html">HostShow</a></li><li><a href="ImageCreate.html">ImageCreate</a></li><li><a href="ImageEdit.html">ImageEdit</a></li><li><a href="ImageOverview.html">ImageOverview</a></li><li><a href="ImagePage.html">ImagePage</a></li><li><a href="ImageShow.html">ImageShow</a></li><li><a href="LogPage.html">LogPage</a></li><li><a href="LogShow.html">LogShow</a></li><li><a href="MainArea.html">MainArea</a></li><li><a href="MonitoringPage.html">MonitoringPage</a></li><li><a href="MonitoringShow.html">MonitoringShow</a></li><li><a href="Navigation.html">Navigation</a></li><li><a href="ProfileCreate.html">ProfileCreate</a></li><li><a href="ProfileEdit.html">ProfileEdit</a></li><li><a href="ProfileOverview.html">ProfileOverview</a></li><li><a href="ProfilePage.html">ProfilePage</a></li><li><a href="ProfileShow.html">ProfileShow</a></li><li><a href="Sidebar.html">Sidebar</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ErrorView">ErrorView</a></li><li><a href="global.html#LoadingView">LoadingView</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jan 23 2018 19:33:08 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
